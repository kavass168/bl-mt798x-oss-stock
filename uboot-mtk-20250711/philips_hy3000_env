bootconf=config-1#mt7981b-philips-hy3000

# Philips HY3000 U-Boot Environment

# Basic settings
bootdelay=3
baudrate=115200
console=ttyS0,115200n1

# FIT configuration
loadaddr=0x46000000
fdtaddr=0x44000000
bootargs=console=${console} root=/dev/fit0 rootwait

# EMMC layout (calculated in blocks, 1 block = 512 bytes)
# FIT image at 0x340000 (3.25MB) = block 0x1A00
# Size 16MB = 0x1000000 bytes = 0x20000 blocks
fit_blk=0x1A00
fit_cnt=0x20000

# Main boot command
bootcmd=mmc dev 0; mmc read ${loadaddr} ${fit_blk} ${fit_cnt}; bootm ${loadaddr}

# Alternative boot methods
boot_tftp=tftp ${loadaddr} openwrt.itb; bootm ${loadaddr}
boot_usb=usb start; if load usb 0 ${loadaddr} openwrt.itb; then bootm ${loadaddr}; fi

# Recovery mode (hold reset button during boot)
boot_recovery=setenv bootdelay 10; saveenv; echo "Entering recovery mode..."; run boot_tftp

# Reset to default
boot_default=setenv bootdelay 3; saveenv; reset

# Save environment version
env_version=hy3000_v1.0
